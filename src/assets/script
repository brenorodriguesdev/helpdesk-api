CREATE TABLE LOGINTYPE (
	ID SERIAL PRIMARY KEY,
	NAME TEXT NOT NULL
);

CREATE TABLE LOGIN (
	ID SERIAL PRIMARY KEY,
	EMAIL TEXT NOT NULL,
	NAME TEXT NOT NULL,
	PASSWORD TEXT NOT NULL,
	COMPANY TEXT NOT NULL,
	IDLOGINTYPE INT NOT NULL,
	FOREIGN KEY (IDLOGINTYPE) REFERENCES LOGINTYPE(ID)
);

CREATE TABLE TICKETSTATUS (
	ID SERIAL PRIMARY KEY,
	NAME TEXT NOT NULL
);

CREATE TABLE TICKET (
	ID SERIAL PRIMARY KEY,
	SUBJECT TEXT NOT NULL,
	CREATEAT DATE NOT NULL,
	UPDATEAT DATE NOT NULL,
	IDLOGINCLIENT INT NOT NULL,
	IDLOGINSUPORT INT,
	IDTICKETSTATUS INT NOT NULL,
	FOREIGN KEY (IDLOGINCLIENT) REFERENCES LOGIN(ID),
	FOREIGN KEY (IDLOGINSUPORT) REFERENCES LOGIN(ID),
	FOREIGN KEY (IDTICKETSTATUS) REFERENCES TICKETSTATUS(ID)
);

CREATE TABLE MESSAGESTATUS (
	ID SERIAL PRIMARY KEY,
	NAME TEXT NOT NULL
);

CREATE TABLE MESSAGE (
	ID SERIAL PRIMARY KEY,
	BODY TEXT NOT NULL,
	CREATEAT DATE NOT NULL,
	IDTICKET INT NOT NULL,
	IDMESSAGESTATUS INT NOT NULL,
	FOREIGN KEY (IDTICKET) REFERENCES TICKET(ID),
	FOREIGN KEY (IDMESSAGESTATUS) REFERENCES MESSAGESTATUS(ID)
);



INSERT INTO LOGINTYPE VALUES (1, 'client');
INSERT INTO LOGINTYPE VALUES (2, 'suport');


INSERT INTO TICKETSTATUS VALUES (1, 'IN QUEUE');
INSERT INTO TICKETSTATUS VALUES (2, 'IN SUPORT');
INSERT INTO TICKETSTATUS VALUES (3, 'FINISH');


INSERT INTO MESSAGESTATUS VALUES (1, 'SENDING');
INSERT INTO MESSAGESTATUS VALUES (2, 'SENT');
INSERT INTO MESSAGESTATUS VALUES (3, 'RECEIVE');
INSERT INTO MESSAGESTATUS VALUES (4, 'READâ€™);